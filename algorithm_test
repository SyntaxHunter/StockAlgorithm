Skip to content
 
Search or jump to…

Pull requests
Issues
Marketplace
Explore
 @jsteng19
Sign out
0
1 0 SyntaxHunter/StockTrading
 Code  Issues 0  Pull requests 0  Projects 0  Wiki  Insights
StockTrading/ 
algorithm_test
  or cancel
    
 
1
import csv
2
aapl = open('/Users/jstenger/Downloads/quantquote_daily_sp500_83986/daily/table_aapl.csv', 'r')
3
reader = csv.reader(aapl)
4
aapl_list = []
5
for row in reader:
6
    aapl_list.append(float(row[2]))
7
​
8
##Simulates investment in Apple stock over the 1000 trading days
9
​
10
​
11
def main():
12
    print("Buy and hold ROI: ", runStrat(buyAndHold))
13
    print("Moving average strategy ROI: ", runStrat(movingAverage))
14
  
15
##runs the strategy strat over 1000 days, returns final stats: (invested, uninvested, ROI)
16
def runStrat(strat):
17
    uninvested = 100_000
18
    invested = 0
19
    for day in range(1000, 2000):
20
        invested = invested * aapl_list[day + 1] / aapl_list[day]
21
        buyOrSell = strat(day, invested, uninvested)
22
        invested = invested + buyOrSell
23
        uninvested = uninvested - buyOrSell
24
        #print("invested: $", invested," Uninvested: $", uninvested)
25
​
26
    return (invested + uninvested) / 100_000
27
​
28
​
29
##Keeps the portion of total funds invested proportional to the ratio between the 200 day
30
##and 50 day moving average.
31
def movingAverage(day, invested, uninvested):
32
    k = 0.5
33
    ratioOfAverages = getAverage(day, 50) / getAverage(day, 200)
34
    #print("Ratio of Averages: ", ratioOfAverages)
35
    confidence = k * ratioOfAverages
36
    confidence = min(confidence, 1)
37
    investmentTarget = confidence * (invested + uninvested)
38
    return investmentTarget - invested
39
​
40
    
41
##The simplest strategy, invests all capital                    
42
def buyAndHold(day, invested, uninvested):
43
    return uninvested
44
​
45
def getAverage(day, interval):
46
    if day - interval / 2 < 0:
47
        print("Error: surrounding data not sufficient to calculate an average over this interval.")
48
        return None
49
    total = 0
@jsteng19
Commit changes

Update algorithm_test

Add an optional extended description…
  Commit directly to the 5/30-in-pro branch.
  Create a new branch for this commit and start a pull request. Learn more about pull requests.
 
© 2018 GitHub, Inc.
Terms
Privacy
Security
Status
Help
Contact GitHub
API
Training
Shop
Blog
About
Press h to open a hovercard with more details.
